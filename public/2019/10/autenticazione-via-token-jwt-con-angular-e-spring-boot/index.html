<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=content-language content="en"><meta name=description content="L’applicazione su cui lavoro è un monolite col frontend e il backend nello stesso progetto, fatti rispettivamente con Angular 8 e Spring Boot; l’autenticazione, quindi, è gestita interamente dal backend tramite cookie.
Quando un utente accede tramite Google Sign-in, Spring Boot gli setta un cookie col JSESSIONID e uno col token XSRF, che poi verranno passati anche per ogni richiesta ajax del frontend.
Ora, per una serie di motivi abbiamo deciso di spostare il frontend in un’applicazione separata e lasciare il backend a esporre solo un’API REST: sembra facile, ma nel momento in cui le due applicazioni sono su due domini diversi il backend non può più settare dei cookie ad uso del frontend."><meta name=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Autenticazione via token JWT con Angular e Spring Boot"><meta name=twitter:description content="L’applicazione su cui lavoro è un monolite col frontend e il backend nello stesso progetto, fatti rispettivamente con Angular 8 e Spring Boot; l’autenticazione, quindi, è gestita interamente dal backend tramite cookie.
Quando un utente accede tramite Google Sign-in, Spring Boot gli setta un cookie col JSESSIONID e uno col token XSRF, che poi verranno passati anche per ogni richiesta ajax del frontend.
Ora, per una serie di motivi abbiamo deciso di spostare il frontend in un’applicazione separata e lasciare il backend a esporre solo un’API REST: sembra facile, ma nel momento in cui le due applicazioni sono su due domini diversi il backend non può più settare dei cookie ad uso del frontend."><meta property="og:title" content="Autenticazione via token JWT con Angular e Spring Boot"><meta property="og:description" content="L’applicazione su cui lavoro è un monolite col frontend e il backend nello stesso progetto, fatti rispettivamente con Angular 8 e Spring Boot; l’autenticazione, quindi, è gestita interamente dal backend tramite cookie.
Quando un utente accede tramite Google Sign-in, Spring Boot gli setta un cookie col JSESSIONID e uno col token XSRF, che poi verranno passati anche per ogni richiesta ajax del frontend.
Ora, per una serie di motivi abbiamo deciso di spostare il frontend in un’applicazione separata e lasciare il backend a esporre solo un’API REST: sembra facile, ma nel momento in cui le due applicazioni sono su due domini diversi il backend non può più settare dei cookie ad uso del frontend."><meta property="og:type" content="article"><meta property="og:url" content="http://example.org/2019/10/autenticazione-via-token-jwt-con-angular-e-spring-boot/"><meta property="article:published_time" content="2019-10-08T13:49:48+00:00"><meta property="article:modified_time" content="2019-10-08T13:49:48+00:00"><base href=http://example.org/2019/10/autenticazione-via-token-jwt-con-angular-e-spring-boot/><title>Autenticazione via token JWT con Angular e Spring Boot · Raibaz.</title><link rel=canonical href=http://example.org/2019/10/autenticazione-via-token-jwt-con-angular-e-spring-boot/><link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700&display=swap" rel=stylesheet><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.13.0/css/all.css integrity=sha384-Bfad6CLCknfcloXFOyFnlgtENryhrpZCe29RTifKEixXQZ38WheV+i/6YWSzkz3V crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin=anonymous><link rel=stylesheet href=/css/coder.min.31a395781f1caab4e90f89f7e5d0f0195b7c1944686a54267ed15c08a820827b.css integrity="sha256-MaOVeB8cqrTpD4n35dDwGVt8GURoalQmftFcCKgggns=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=http://example.org/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=http://example.org/images/favicon-16x16.png sizes=16x16><meta name=generator content="Hugo 0.74.1"></head><body class=colorscheme-light><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>Raibaz.</a></section></nav><div class=content><section class="container page"><article><header><h1>Autenticazione via token JWT con Angular e Spring Boot</h1></header><p>L’applicazione su cui lavoro è un monolite col frontend e il backend nello stesso progetto, fatti rispettivamente con Angular 8 e Spring Boot; l’autenticazione, quindi, è gestita interamente dal backend tramite cookie.</p><p>Quando un utente accede tramite Google Sign-in, Spring Boot gli setta un cookie col JSESSIONID e uno col token XSRF, che poi verranno passati anche per ogni richiesta ajax del frontend.</p><p>Ora, per una serie di motivi abbiamo deciso di spostare il frontend in un’applicazione separata e lasciare il backend a esporre solo un’API REST: sembra facile, ma nel momento in cui le due applicazioni sono su due domini diversi il backend non può più settare dei cookie ad uso del frontend.</p><p>Serve un’altra soluzione.</p><p>Il flusso di login da implementare, quindi, è una cosa così:</p><p></p><p>Il frontend effettua l’autenticazione con Google Sign-in e passa i dati ricevuti da Google a un endpoint del backend, che li valida sia nuovamente con l’autenticazione di Google che col proprio DB, per verificare che l’utente che sta accedendo sia effettivamente un utente valido per entrambi.</p><p>Fatto questo, l’endpoint restituisce al frontend un token JWT, che quest’ultimo userà per autenticare tutte le richieste successive.</p><p>Come si fa tutto ciò? È relativamente facile, ma ci sono un paio di <em>gotcha</em> a cui stare attenti che rischiano di rendere tutto piuttosto fastidioso, dato che quando c’è qualcosa che non va il massimo che potete sperare di ottenere è un poco chiarificatore HTTP 403.</p><p>Dato che ci sono diversi pezzi coinvolti e fare tutto in un muraglione di testo diventerebbe troppo noioso e impossibile da seguire, ho deciso di dividere il post in una serie di puntate, anche per creare più <em>suspence</em>, per cui per oggi basta così: nella prossima puntata vedremo la parte di autenticazione con Google nel frontend.</p><p>Avanti allora: <a href=https://raibaz.it/2019/10/autenticazione-via-token-jwt-con-angular-e-spring-boot-parte-1-google-login-con-angular/>Parte 1 – Google login con Angular</a>.</p></article></section></div><footer class=footer><section class=container>©
2020
·
Powered by <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.</section></footer></main></body></html>