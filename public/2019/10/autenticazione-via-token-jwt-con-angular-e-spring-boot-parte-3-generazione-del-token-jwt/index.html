<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=content-language content="en"><meta name=description content="(Questo è il quarto post di una serie che inizia qui e prosegue qui e qui)
Nelle puntate precedenti:
 Abbiamo descritto come funziona il flusso dell’autenticazione Abbiamo visto l’implementazione del Google login nell’applicazione Angular Abbiamo visto come configurare Spring Boot per gestire l’autenticazione  Ci resta solo da vedere come è effettivamente implementato l’endpoint /authenticate, che valida l’utente e gli restituisce un token JWT.
Il servizio invocato dal controller è fatto così:"><meta name=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Autenticazione via token JWT con Angular e Spring Boot: parte 3, generazione del token JWT"><meta name=twitter:description content="(Questo è il quarto post di una serie che inizia qui e prosegue qui e qui)
Nelle puntate precedenti:
 Abbiamo descritto come funziona il flusso dell’autenticazione Abbiamo visto l’implementazione del Google login nell’applicazione Angular Abbiamo visto come configurare Spring Boot per gestire l’autenticazione  Ci resta solo da vedere come è effettivamente implementato l’endpoint /authenticate, che valida l’utente e gli restituisce un token JWT.
Il servizio invocato dal controller è fatto così:"><meta property="og:title" content="Autenticazione via token JWT con Angular e Spring Boot: parte 3, generazione del token JWT"><meta property="og:description" content="(Questo è il quarto post di una serie che inizia qui e prosegue qui e qui)
Nelle puntate precedenti:
 Abbiamo descritto come funziona il flusso dell’autenticazione Abbiamo visto l’implementazione del Google login nell’applicazione Angular Abbiamo visto come configurare Spring Boot per gestire l’autenticazione  Ci resta solo da vedere come è effettivamente implementato l’endpoint /authenticate, che valida l’utente e gli restituisce un token JWT.
Il servizio invocato dal controller è fatto così:"><meta property="og:type" content="article"><meta property="og:url" content="http://example.org/2019/10/autenticazione-via-token-jwt-con-angular-e-spring-boot-parte-3-generazione-del-token-jwt/"><meta property="article:published_time" content="2019-10-11T07:51:01+00:00"><meta property="article:modified_time" content="2019-10-11T07:51:01+00:00"><base href=http://example.org/2019/10/autenticazione-via-token-jwt-con-angular-e-spring-boot-parte-3-generazione-del-token-jwt/><title>Autenticazione via token JWT con Angular e Spring Boot: parte 3, generazione del token JWT · Raibaz.</title><link rel=canonical href=http://example.org/2019/10/autenticazione-via-token-jwt-con-angular-e-spring-boot-parte-3-generazione-del-token-jwt/><link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700&display=swap" rel=stylesheet><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.13.0/css/all.css integrity=sha384-Bfad6CLCknfcloXFOyFnlgtENryhrpZCe29RTifKEixXQZ38WheV+i/6YWSzkz3V crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin=anonymous><link rel=stylesheet href=/css/coder.min.31a395781f1caab4e90f89f7e5d0f0195b7c1944686a54267ed15c08a820827b.css integrity="sha256-MaOVeB8cqrTpD4n35dDwGVt8GURoalQmftFcCKgggns=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=http://example.org/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=http://example.org/images/favicon-16x16.png sizes=16x16><meta name=generator content="Hugo 0.74.1"></head><body class=colorscheme-light><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>Raibaz.</a></section></nav><div class=content><section class="container page"><article><header><h1>Autenticazione via token JWT con Angular e Spring Boot: parte 3, generazione del token JWT</h1></header><p><em>(Questo è il quarto post di una serie che inizia <a href=https://raibaz.it/2019/10/autenticazione-via-token-jwt-con-angular-e-spring-boot/>qui</a> e prosegue <a href=https://raibaz.it/2019/10/autenticazione-via-token-jwt-con-angular-e-spring-boot-parte-1-google-login-con-angular/>qui</a> e <a href=https://raibaz.it/2019/10/autenticazione-via-token-jwt-con-angular-e-spring-boot-parte-2-configurazione-di-spring-boot/>qui</a>)</em></p><p>Nelle puntate precedenti:</p><ul><li>Abbiamo descritto come funziona il flusso dell’autenticazione</li><li>Abbiamo visto l’implementazione del Google login nell’applicazione Angular</li><li>Abbiamo visto come configurare Spring Boot per gestire l’autenticazione</li></ul><p>Ci resta solo da vedere come è effettivamente implementato l’endpoint <code>/authenticate</code>, che valida l’utente e gli restituisce un token JWT.</p><p>Il servizio invocato dal controller è fatto così:</p><p>Non fa niente di complicato, in effetti, fa solo tre cose:</p><ul><li>Valida lo username sul DB chiedendo allo <code>userService</code> se esiste effettivamente un utente con quello username</li><li>Valida il token ritornato al frontend dall’autenticazione di Google</li><li>Genera un token JWT e lo restituisce</li></ul><p>La validazione su DB è banale, per cui confido che non serva dilungarcisi ulteriormente; anche quella del token di Google non è particolarmente complicata, grazie alla dipendenza da <code>com.google.api-client:google-api-client</code> che mette a disposizione la classe <code>GoogleIdTokenVerifier</code>.</p><p>A questo punto, ci resta solo da generare il token JWT:</p><p>E il gioco è fatto: come abbiamo visto nelle puntate precedenti, il frontend passerà il token così generato e appena ottenuto nell’header <code>Authorization</code> di ogni richiesta al backend, permettendo quindi di autenticarsi.</p><p>La parte più critica in tutto questo cinema, l’avrete intuito, è la configurazione dell’autenticazione di Spring Boot, che ha una serie di <em>gotcha</em> e momenti <em>AHA!</em> niente affatto banali che mi hanno fatto sbattere la testa ripetutamente contro il muro e mi hanno spinto a scrivere questa serie di post, nella speranza di aiutare i poveri sventurati che si troveranno nella mia stessa situazione.</p><p>Come si suol dire, il modo migliore per imparare qualcosa è spiegarlo a qualcun’altro.</p></article></section></div><footer class=footer><section class=container>©
2020
·
Powered by <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.</section></footer></main></body></html>